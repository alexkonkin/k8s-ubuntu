export KUBECONFIG=/etc/kubernetes/admin.conf

ansible-playbook -i hosts --limit c1-master1,c1-node1  playbook.yml

ansible -c ssh -i hosts -m ping c1-master1 -vvv


kubectl get nodes worker1 -o json | jq .status.addresses
less /etc/systemd/system/kubelet.service.d/10-kubeadm.conf
Environment="KUBELET_EXTRA_ARGS=--node-ip=<worker IP address>"
ExecStart=

#mapping in virtualbox don't use the same port for the host ip (8888 host 8001 guest)
#to expose Dashobard use the command
kubectl proxy --address='0.0.0.0' --disable-filter=true

#get a name of kubernetes dashboard
kubectl get pods --all-namespaces

#check that kubernetes dashboard pod works as expected, you should not see any errors
kubectl -v=9 logs kubernetes-dashboard-7b5bf5d559-h59jg --namespace kubernetes-dashboard

#map km1 ip in virtualbox as host:localhost:8888 to guest:172.16.94.10:8001
http://localhost:8888/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/#/login

#get token that should be used to login to the dashboard
export KUBECONFIG=/etc/kubernetes/admin.conf && kubectl -n kube-system describe secret $(kubectl -n kube-system get secret | grep admin-user | awk '{print $1}')


#deploy simple pod
kubectl apply -f https://k8s.io/examples/application/shell-demo.yaml

kubectl get pod shell-demo
#get console in the shell-demo pod
kubectl exec -it shell-demo -- /bin/bash
#get lot output for pod
kubectl -v=9 exec -it busybox-7c9687585b-297lt -- /bin/sh
kubectl -v=9 logs busybox-7c9687585b-297lt
